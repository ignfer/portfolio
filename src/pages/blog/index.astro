---
import Layout from "../../layouts/Layout.astro";
import {getCollection} from "astro:content";
import {navigate} from 'astro:transitions/client';

const allPosts = await getCollection('blog');
---
<Layout>
  <script>
		import {navigate} from 'astro:transitions/client';

		const navigateToPost = (slug) => {
			navigate(`/blog/${slug}`);
		}
  </script>
  <div class="w-full h-full flex flex-col items-center p-8">
    <div class="flex flex-col gap-4">
			{allPosts.map((post) => (
              <div onclick={`navigateToPost('${post.slug}')`}
                   class="cursor-pointer p-2 rounded-xl border border-stone-200 shadow-sm shadow-stone-200/50 flex flex-col gap-2 duration-200 hover:shadow-lg hover:border-blue-500">
                <div class="flex flex-row justify-between">
                  <h2 class="font-inter text-stone-900 font-bold underline"><a href={`/blog/${post.slug}`}>{post.data.title}</a></h2>
                  <p class="text-stone-500 font-mono px-1 border border-stone-200 rounded-md">{post.data.lastModified}</p>
                </div>
                <div class="flex flex-row gap-2">
									{
										post.data.tags?.map((t) => {
											return (
                              <p class="font-inter text-sm py-0.5 px-2 border border-blue-700/10 rounded-md text-stone-50 bg-blue-500/50 shadow-sm">#{t}</p>
											)
										})
									}
                </div>
                <p class="text-stone-500 text-sm">{post.data.description}</p>
              </div>
			))}
    </div>
  </div>
</Layout>